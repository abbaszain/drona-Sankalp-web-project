!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(u){u.extend(u.fn,{validate:function(e){if(this.length){var i=u.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new u.validator(e,this[0]),u.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.settings.submitHandler&&(i.submitButton=e.target),u(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(r){function e(){var e,t;return!i.settings.submitHandler||(i.submitButton&&(e=u("<input type='hidden'/>").attr("name",i.submitButton.name).val(u(i.submitButton).val()).appendTo(i.currentForm)),t=i.settings.submitHandler.call(i,i.currentForm,r),i.submitButton&&e.remove(),void 0!==t&&t)}return i.settings.debug&&r.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):e():(i.focusInvalid(),!1)})),i)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,r;return u(this[0]).is("form")?e=this.validate().form():(r=[],e=!0,t=u(this[0].form).validate(),this.each(function(){e=t.element(this)&&e,r=r.concat(t.errorList)}),t.errorList=r),e},rules:function(e,t){var r,i,a,n,s,o,l=this[0];if(e)switch(r=u.data(l.form,"validator").settings,i=r.rules,a=u.validator.staticRules(l),e){case"add":u.extend(a,u.validator.normalizeRule(t)),delete a.messages,i[l.name]=a,t.messages&&(r.messages[l.name]=u.extend(r.messages[l.name],t.messages));break;case"remove":return t?(o={},u.each(t.split(/\s/),function(e,t){o[t]=a[t],delete a[t],"required"===t&&u(l).removeAttr("aria-required")}),o):(delete i[l.name],a)}return(n=u.validator.normalizeRules(u.extend({},u.validator.classRules(l),u.validator.attributeRules(l),u.validator.dataRules(l),u.validator.staticRules(l)),l)).required&&(s=n.required,delete n.required,n=u.extend({required:s},n),u(l).attr("aria-required","true")),n.remote&&(s=n.remote,delete n.remote,n=u.extend(n,{remote:s})),n}}),u.extend(u.expr[":"],{blank:function(e){return!u.trim(""+u(e).val())},filled:function(e){return!!u.trim(""+u(e).val())},unchecked:function(e){return!u(e).prop("checked")}}),u.validator=function(e,t){this.settings=u.extend(!0,{},u.validator.defaults,e),this.currentForm=t,this.init()},u.validator.format=function(r,e){return 1===arguments.length?function(){var e=u.makeArray(arguments);return e.unshift(r),u.validator.format.apply(this,e)}:(2<arguments.length&&e.constructor!==Array&&(e=u.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),u.each(e,function(e,t){r=r.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})}),r)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==u.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,r){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(r):u(e).addClass(t).removeClass(r)},unhighlight:function(e,t,r){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(r):u(e).removeClass(t).addClass(r)}},setDefaults:function(e){u.extend(u.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t=u.data(this.form,"validator"),r="on"+e.type.replace(/^validate/,""),i=t.settings;i[r]&&!u(this).is(i.ignore)&&i[r].call(t,this,e)}this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var r,i=this.groups={};u.each(this.settings.groups,function(r,e){"string"==typeof e&&(e=e.split(/\s/)),u.each(e,function(e,t){i[t]=r})}),r=this.settings.rules,u.each(r,function(e,t){r[e]=u.validator.normalizeRule(t)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),u(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t=this.clean(e),r=this.validationTargetFor(t),i=!0;return void 0===(this.lastElement=r)?delete this.invalid[t.name]:(this.prepareElement(r),this.currentElements=u(r),(i=!1!==this.check(r))?delete this.invalid[r.name]:this.invalid[r.name]=!0),u(e).attr("aria-invalid",!i),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){for(var e in u.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[e],element:this.findByName(e)[0]});this.successList=u.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var e,t=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,"");else t.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,r=0;for(t in e)r++;return r},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===u.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var e=this,t={};return u(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in t||!e.objectLength(u(this).rules()))&&(t[this.name]=!0)})},clean:function(e){return u(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([]),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t,r=u(e),i=e.type;return"radio"===i||"checkbox"===i?this.findByName(e.name).filter(":checked").val():"number"===i&&void 0!==e.validity?!e.validity.badInput&&r.val():"string"==typeof(t=r.val())?t.replace(/\r/g,""):t},check:function(t){t=this.validationTargetFor(this.clean(t));var e,r,i,a=u(t).rules(),n=u.map(a,function(e,t){return t}).length,s=!1,o=this.elementValue(t);for(r in a){i={method:r,parameters:a[r]};try{if("dependency-mismatch"===(e=u.validator.methods[r].call(this,o,t,i.parameters))&&1===n){s=!0;continue}if(s=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!s)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(e,t){return u(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||u(e).data("msg")},customMessage:function(e,t){var r=this.settings.messages[e];return r&&(r.constructor===String?r:r[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,u.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var r=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,t.parameters,e):i.test(r)&&(r=u.validator.format(r.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:r,element:e,method:t.method}),this.errorMap[e.name]=r,this.submitted[e.name]=r},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,r;for(e=0;this.errorList[e];e++)r=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,r.element,this.settings.errorClass,this.settings.validClass),this.showLabel(r.element,r.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var r,i,a,n=this.errorsFor(e),s=this.idOrName(e),o=u(e).attr("aria-describedby");n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(t)):(r=n=u("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(r=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,u(e)):r.insertAfter(e),n.is("label")?n.attr("for",s):0===n.parents("label[for='"+s+"']").length&&(a=n.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),o?o.match(new RegExp("\\b"+a+"\\b"))||(o+=" "+a):o=a,u(e).attr("aria-describedby",o),(i=this.groups[e.name])&&u.each(this.groups,function(e,t){t===i&&u("[name='"+e+"']",this.currentForm).attr("aria-describedby",n.attr("id"))}))),!t&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var t=this.idOrName(e),r=u(e).attr("aria-describedby"),i="label[for='"+t+"'], label[for='"+t+"'] *";return r&&(i=i+", #"+r.replace(/\s+/g,", #")),this.errors().filter(i)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),u(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return u(this.currentForm).find("[name='"+e+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return u("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!u(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!u.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(u(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return u.data(e,"previousValue")||u.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:u.extend(this.classRuleSettings,e)},classRules:function(e){var t={},r=u(e).attr("class");return r&&u.each(r.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(t,u.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,r,i){/min|max/.test(r)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?e[r]=i:t===r&&"range"!==t&&(e[r]=!0)},attributeRules:function(e){var t,r,i={},a=u(e),n=e.getAttribute("type");for(t in u.validator.methods)"required"===t?(""===(r=e.getAttribute(t))&&(r=!0),r=!!r):r=a.attr(t),this.normalizeAttributeRule(i,n,t,r);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,r,i={},a=u(e),n=e.getAttribute("type");for(t in u.validator.methods)r=a.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(i,n,t,r);return i},staticRules:function(e){var t={},r=u.data(e.form,"validator");return r.settings.rules&&(t=u.validator.normalizeRule(r.settings.rules[e.name])||{}),t},normalizeRules:function(i,a){return u.each(i,function(e,t){if(!1!==t){if(t.param||t.depends){var r=!0;switch(typeof t.depends){case"string":r=!!u(t.depends,a.form).length;break;case"function":r=t.depends.call(a,a)}r?i[e]=void 0===t.param||t.param:delete i[e]}}else delete i[e]}),u.each(i,function(e,t){i[e]=u.isFunction(t)?t(a):t}),u.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),u.each(["rangelength","range"],function(){var e;i[this]&&(u.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),u.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i},normalizeRule:function(e){if("string"==typeof e){var t={};u.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,r){u.validator.methods[e]=t,u.validator.messages[e]=void 0!==r?r:u.validator.messages[e],t.length<3&&u.validator.addClassRules(e,u.validator.normalizeRule(e))},methods:{required:function(e,t,r){if(!this.depend(r,t))return"dependency-mismatch";if("select"===t.nodeName.toLowerCase()){var i=u(t).val();return i&&0<i.length}return this.checkable(t)?0<this.getLength(e,t):0<e.length},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var r,i,a=0,n=0,s=!1;if((e=e.replace(/\D/g,"")).length<13||19<e.length)return!1;for(r=e.length-1;0<=r;r--)i=e.charAt(r),n=parseInt(i,10),s&&9<(n*=2)&&(n-=9),a+=n,s=!s;return a%10==0},minlength:function(e,t,r){var i=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||r<=i},maxlength:function(e,t,r){var i=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i<=r},rangelength:function(e,t,r){var i=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i>=r[0]&&i<=r[1]},min:function(e,t,r){return this.optional(t)||r<=e},max:function(e,t,r){return this.optional(t)||e<=r},range:function(e,t,r){return this.optional(t)||e>=r[0]&&e<=r[1]},equalTo:function(e,t,r){var i=u(r);return this.settings.onfocusout&&i.off(".validate-equalTo").on("blur.validate-equalTo",function(){u(t).valid()}),e===i.val()},remote:function(n,s,e){if(this.optional(s))return"dependency-mismatch";var o,t,l=this.previousValue(s);return this.settings.messages[s.name]||(this.settings.messages[s.name]={}),l.originalMessage=this.settings.messages[s.name].remote,this.settings.messages[s.name].remote=l.message,e="string"==typeof e&&{url:e}||e,l.old===n?l.valid:(l.old=n,(o=this).startRequest(s),(t={})[s.name]=n,u.ajax(u.extend(!0,{mode:"abort",port:"validate"+s.name,dataType:"json",data:t,context:o.currentForm,success:function(e){var t,r,i,a=!0===e||"true"===e;o.settings.messages[s.name].remote=l.originalMessage,a?(i=o.formSubmitted,o.prepareElement(s),o.formSubmitted=i,o.successList.push(s),delete o.invalid[s.name],o.showErrors()):(t={},r=e||o.defaultMessage(s,"remote"),t[s.name]=l.message=u.isFunction(r)?r(n):r,o.invalid[s.name]=!0,o.showErrors(t)),l.valid=a,o.stopRequest(s,a)}},e)),"pending")}}});var i,a={};u.ajaxPrefilter?u.ajaxPrefilter(function(e,t,r){var i=e.port;"abort"===e.mode&&(a[i]&&a[i].abort(),a[i]=r)}):(i=u.ajax,u.ajax=function(e){var t=("mode"in e?e:u.ajaxSettings).mode,r=("port"in e?e:u.ajaxSettings).port;return"abort"===t?(a[r]&&a[r].abort(),a[r]=i.apply(this,arguments),a[r]):i.apply(this,arguments)})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(q){"use strict";function r(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),q(e.target).ajaxSubmit(t))}function i(e){var t=e.target,r=q(t);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(0===i.length)return;t=i[0]}var a=this;if("image"==(a.clk=t).type)if(void 0!==e.offsetX)a.clk_x=e.offsetX,a.clk_y=e.offsetY;else if("function"==typeof q.fn.offset){var n=r.offset();a.clk_x=e.pageX-n.left,a.clk_y=e.pageY-n.top}else a.clk_x=e.pageX-t.offsetLeft,a.clk_y=e.pageY-t.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)}function M(){if(q.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var y={};y.fileapi=void 0!==q("<input type='file'/>").get(0).files,y.formdata=void 0!==window.FormData;var N=!!q.fn.prop;q.fn.attr2=function(){if(!N)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},q.fn.ajaxSubmit=function(E){function e(e){function c(t){var r=null;try{t.contentWindow&&(r=t.contentWindow.document)}catch(e){M("cannot get iframe.contentWindow document: "+e)}if(r)return r;try{r=t.contentDocument?t.contentDocument:t.document}catch(e){M("cannot get iframe.contentDocument: "+e),r=t.document}return r}function t(){var e=D.attr2("target"),t=D.attr2("action"),r=D.attr("enctype")||D.attr("encoding")||"multipart/form-data";o.setAttribute("target",n),(!F||/post/i.test(F))&&o.setAttribute("method","POST"),t!=h.url&&o.setAttribute("action",h.url),h.skipEncodingOverride||F&&!/post/i.test(F)||D.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(b=setTimeout(function(){v=!0,d(x)},h.timeout));var i=[];try{if(h.extraData)for(var a in h.extraData)h.extraData.hasOwnProperty(a)&&(q.isPlainObject(h.extraData[a])&&h.extraData[a].hasOwnProperty("name")&&h.extraData[a].hasOwnProperty("value")?i.push(q('<input type="hidden" name="'+h.extraData[a].name+'">').val(h.extraData[a].value).appendTo(o)[0]):i.push(q('<input type="hidden" name="'+a+'">').val(h.extraData[a]).appendTo(o)[0]));h.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",d):p.addEventListener("load",d,!1),setTimeout(function e(){try{var t=c(p).readyState;M("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){M("Server abort: ",e," (",e.name,")"),d(w),b&&clearTimeout(b),b=void 0}},15);try{o.submit()}catch(e){document.createElement("form").submit.apply(o)}}finally{o.setAttribute("action",t),o.setAttribute("enctype",r),e?o.setAttribute("target",e):D.removeAttr("target"),q(i).remove()}}function d(e){if(!g.aborted&&!k){if((T=c(p))||(M("cannot access response document"),e=w),e===x&&g)return g.abort("timeout"),void y.reject(g,"timeout");if(e==w&&g)return g.abort("server abort"),void y.reject(g,"error","server abort");if(T&&T.location.href!=h.iframeSrc||v){p.detachEvent?p.detachEvent("onload",d):p.removeEventListener("load",d,!1);var t,r="success";try{if(v)throw"timeout";var i="xml"==h.dataType||T.XMLDocument||q.isXMLDoc(T);if(M("isXml="+i),!i&&window.opera&&(null===T.body||!T.body.innerHTML)&&--C)return M("requeing onLoad callback, DOM not available"),void setTimeout(d,250);var a=T.body?T.body:T.documentElement;g.responseText=a?a.innerHTML:null,g.responseXML=T.XMLDocument?T.XMLDocument:T,i&&(h.dataType="xml"),g.getResponseHeader=function(e){return{"content-type":h.dataType}[e.toLowerCase()]},a&&(g.status=Number(a.getAttribute("status"))||g.status,g.statusText=a.getAttribute("statusText")||g.statusText);var n=(h.dataType||"").toLowerCase(),s=/(json|script|text)/.test(n);if(s||h.textarea){var o=T.getElementsByTagName("textarea")[0];if(o)g.responseText=o.value,g.status=Number(o.getAttribute("status"))||g.status,g.statusText=o.getAttribute("statusText")||g.statusText;else if(s){var l=T.getElementsByTagName("pre")[0],u=T.getElementsByTagName("body")[0];l?g.responseText=l.textContent?l.textContent:l.innerText:u&&(g.responseText=u.textContent?u.textContent:u.innerText)}}else"xml"==n&&!g.responseXML&&g.responseText&&(g.responseXML=L(g.responseText));try{S=A(g,n,h)}catch(e){r="parsererror",g.error=t=e||r}}catch(e){M("error caught: ",e),r="error",g.error=t=e||r}g.aborted&&(M("upload aborted"),r=null),g.status&&(r=200<=g.status&&g.status<300||304===g.status?"success":"error"),"success"===r?(h.success&&h.success.call(h.context,S,"success",g),y.resolve(g.responseText,"success",g),m&&q.event.trigger("ajaxSuccess",[g,h])):r&&(void 0===t&&(t=g.statusText),h.error&&h.error.call(h.context,g,r,t),y.reject(g,"error",t),m&&q.event.trigger("ajaxError",[g,h,t])),m&&q.event.trigger("ajaxComplete",[g,h]),m&&!--q.active&&q.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,g,r),k=!0,h.timeout&&clearTimeout(b),setTimeout(function(){h.iframeTarget?f.attr("src",h.iframeSrc):f.remove(),g.responseXML=null},100)}}}var r,i,h,m,n,f,p,g,a,s,v,b,o=D[0],y=q.Deferred();if(y.abort=function(e){g.abort(e)},e)for(i=0;i<R.length;i++)r=q(R[i]),N?r.prop("disabled",!1):r.removeAttr("disabled");if((h=q.extend(!0,{},q.ajaxSettings,E)).context=h.context||h,n="jqFormIO"+(new Date).getTime(),h.iframeTarget?(s=(f=q(h.iframeTarget)).attr2("name"))?n=s:f.attr2("name",n):(f=q('<iframe name="'+n+'" src="'+h.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";M("aborting upload... "+t),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(e){}f.attr("src",h.iframeSrc),g.error=t,h.error&&h.error.call(h.context,g,t,e),m&&q.event.trigger("ajaxError",[g,h,t]),h.complete&&h.complete.call(h.context,g,t)}},(m=h.global)&&0==q.active++&&q.event.trigger("ajaxStart"),m&&q.event.trigger("ajaxSend",[g,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,g,h))return h.global&&q.active--,y.reject(),y;if(g.aborted)return y.reject(),y;(a=o.clk)&&((s=a.name)&&!a.disabled&&(h.extraData=h.extraData||{},h.extraData[s]=a.value,"image"==a.type&&(h.extraData[s+".x"]=o.clk_x,h.extraData[s+".y"]=o.clk_y)));var x=1,w=2,l=q("meta[name=csrf-token]").attr("content"),u=q("meta[name=csrf-param]").attr("content");u&&l&&(h.extraData=h.extraData||{},h.extraData[u]=l),h.forceSync?t():setTimeout(t,10);var S,T,k,C=50,L=q.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},j=q.parseJSON||function(e){return window.eval("("+e+")")},A=function(e,t,r){var i=e.getResponseHeader("content-type")||"",a="xml"===t||!t&&0<=i.indexOf("xml"),n=a?e.responseXML:e.responseText;return a&&"parsererror"===n.documentElement.nodeName&&q.error&&q.error("parsererror"),r&&r.dataFilter&&(n=r.dataFilter(n,t)),"string"==typeof n&&("json"===t||!t&&0<=i.indexOf("json")?n=j(n):("script"===t||!t&&0<=i.indexOf("javascript"))&&q.globalEval(n)),n};return y}if(!this.length)return M("ajaxSubmit: skipping submit process - no element selected"),this;var F,t,r,D=this;"function"==typeof E?E={success:E}:void 0===E&&(E={}),F=E.type||this.attr2("method"),(r=(r="string"==typeof(t=E.url||this.attr2("action"))?q.trim(t):"")||window.location.href||"")&&(r=(r.match(/^([^#]+)/)||[])[1]),E=q.extend(!0,{url:r,success:q.ajaxSettings.success,type:F||q.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},E);var i={};if(this.trigger("form-pre-serialize",[this,E,i]),i.veto)return M("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(E.beforeSerialize&&!1===E.beforeSerialize(this,E))return M("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a=E.traditional;void 0===a&&(a=q.ajaxSettings.traditional);var n,R=[],s=this.formToArray(E.semantic,R);if(E.data&&(E.extraData=E.data,n=q.param(E.data,a)),E.beforeSubmit&&!1===E.beforeSubmit(s,this,E))return M("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[s,this,E,i]),i.veto)return M("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var o=q.param(s,a);n&&(o=o?o+"&"+n:n),"GET"==E.type.toUpperCase()?(E.url+=(0<=E.url.indexOf("?")?"&":"?")+o,E.data=null):E.data=o;var l=[];if(E.resetForm&&l.push(function(){D.resetForm()}),E.clearForm&&l.push(function(){D.clearForm(E.includeHidden)}),!E.dataType&&E.target){var u=E.success||function(){};l.push(function(e){var t=E.replaceTarget?"replaceWith":"html";q(E.target)[t](e).each(u,arguments)})}else E.success&&l.push(E.success);if(E.success=function(e,t,r){for(var i=E.context||this,a=0,n=l.length;a<n;a++)l[a].apply(i,[e,t,r||D,D])},E.error){var c=E.error;E.error=function(e,t,r){var i=E.context||this;c.apply(i,[e,t,r,D])}}if(E.complete){var d=E.complete;E.complete=function(e,t){var r=E.context||this;d.apply(r,[e,t,D])}}var h=0<q("input[type=file]:enabled",this).filter(function(){return""!==q(this).val()}).length,m="multipart/form-data",f=D.attr("enctype")==m||D.attr("encoding")==m,p=y.fileapi&&y.formdata;M("fileAPI :"+p);var g,v=(h||f)&&!p;!1!==E.iframe&&(E.iframe||v)?E.closeKeepAlive?q.get(E.closeKeepAlive,function(){g=e(s)}):g=e(s):g=(h||f)&&p?function(e){for(var r=new FormData,t=0;t<e.length;t++)r.append(e[t].name,e[t].value);if(E.extraData){var i=function(e){var t,r,i=q.param(e,E.traditional).split("&"),a=i.length,n=[];for(t=0;t<a;t++)i[t]=i[t].replace(/\+/g," "),r=i[t].split("="),n.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return n}(E.extraData);for(t=0;t<i.length;t++)i[t]&&r.append(i[t][0],i[t][1])}E.data=null;var a=q.extend(!0,{},q.ajaxSettings,E,{contentType:!1,processData:!1,cache:!1,type:F||"POST"});E.uploadProgress&&(a.xhr=function(){var e=q.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var t=0,r=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(r/i*100)),E.uploadProgress(e,r,i,t)},!1),e}),a.data=null;var n=a.beforeSend;return a.beforeSend=function(e,t){E.formData?t.data=E.formData:t.data=r,n&&n.call(this,e,t)},q.ajax(a)}(s):q.ajax(E),D.removeData("jqxhr").data("jqxhr",g);for(var b=0;b<R.length;b++)R[b]=null;return this.trigger("form-submit-notify",[this,E]),this},q.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&q.isFunction(q.fn.on),!e.delegation&&0===this.length){var t={s:this.selector,c:this.context};return!q.isReady&&t.s?(M("DOM not ready, queuing ajaxForm"),q(function(){q(t.s,t.c).ajaxForm(e)})):M("terminating; zero elements found by selector"+(q.isReady?"":" (DOM not ready)")),this}return e.delegation?(q(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,e,r).on("click.form-plugin",this.selector,e,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,r).bind("click.form-plugin",e,i)},q.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},q.fn.formToArray=function(e,t){var r=[];if(0===this.length)return r;var i,a,n,s,o,l,u,c,d=this[0],h=this.attr("id"),m=e?d.getElementsByTagName("*"):d.elements;if(m&&!/MSIE [678]/.test(navigator.userAgent)&&(m=q(m).get()),h&&((i=q(':input[form="'+h+'"]').get()).length&&(m=(m||[]).concat(i))),!m||!m.length)return r;for(a=0,u=m.length;a<u;a++)if((s=(l=m[a]).name)&&!l.disabled)if(e&&d.clk&&"image"==l.type)d.clk==l&&(r.push({name:s,value:q(l).val(),type:l.type}),r.push({name:s+".x",value:d.clk_x},{name:s+".y",value:d.clk_y}));else if((o=q.fieldValue(l,!0))&&o.constructor==Array)for(t&&t.push(l),n=0,c=o.length;n<c;n++)r.push({name:s,value:o[n]});else if(y.fileapi&&"file"==l.type){t&&t.push(l);var f=l.files;if(f.length)for(n=0;n<f.length;n++)r.push({name:s,value:f[n],type:l.type});else r.push({name:s,value:"",type:l.type})}else null!=o&&(t&&t.push(l),r.push({name:s,value:o,type:l.type,required:l.required}));if(!e&&d.clk){var p=q(d.clk),g=p[0];(s=g.name)&&!g.disabled&&"image"==g.type&&(r.push({name:s,value:p.val()}),r.push({name:s+".x",value:d.clk_x},{name:s+".y",value:d.clk_y}))}return r},q.fn.formSerialize=function(e){return q.param(this.formToArray(e))},q.fn.fieldSerialize=function(a){var n=[];return this.each(function(){var e=this.name;if(e){var t=q.fieldValue(this,a);if(t&&t.constructor==Array)for(var r=0,i=t.length;r<i;r++)n.push({name:e,value:t[r]});else null!=t&&n.push({name:this.name,value:t})}}),q.param(n)},q.fn.fieldValue=function(e){for(var t=[],r=0,i=this.length;r<i;r++){var a=this[r],n=q.fieldValue(a,e);null==n||n.constructor==Array&&!n.length||(n.constructor==Array?q.merge(t,n):t.push(n))}return t},q.fieldValue=function(e,t){var r=e.name,i=e.type,a=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!e.checked||("submit"==i||"image"==i)&&e.form&&e.form.clk!=e||"select"==a&&-1==e.selectedIndex))return null;if("select"==a){var n=e.selectedIndex;if(n<0)return null;for(var s=[],o=e.options,l="select-one"==i,u=l?n+1:o.length,c=l?n:0;c<u;c++){var d=o[c];if(d.selected){var h=d.value;if(h||(h=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),l)return h;s.push(h)}}return s}return q(e).val()},q.fn.clearForm=function(e){return this.each(function(){q("input,select,textarea",this).clearFields(e)})},q.fn.clearFields=q.fn.clearInputs=function(r){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();i.test(e)||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t?this.selectedIndex=-1:"file"==e?/MSIE/.test(navigator.userAgent)?q(this).replaceWith(q(this).clone(!0)):q(this).val(""):r&&(!0===r&&/hidden/.test(e)||"string"==typeof r&&q(this).is(r))&&(this.value="")})},q.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},q.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},q.fn.selected=function(r){return void 0===r&&(r=!0),this.each(function(){var e=this.type;if("checkbox"==e||"radio"==e)this.checked=r;else if("option"==this.tagName.toLowerCase()){var t=q(this).parent("select");r&&t[0]&&"select-one"==t[0].type&&t.find("option").selected(!1),this.selected=r}})},q.fn.ajaxSubmit.debug=!1});